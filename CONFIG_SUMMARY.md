# PXE Server Configuration Summary

This file provides an overview of all critical configuration files for the PXE server environment. It documents their function and location in both the live system and this Git repository.

| Service Area | File in Live System                                   | Path in This Repository                                   | Function / Logic                                                                                                                              |
| :----------- | :---------------------------------------------------- | :-------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------- |
| **dnsmasq**  | `/lib/systemd/system/dnsmasq.service`                 | `services/dnsmasq/dnsmasq.service`                        | **(Crucial Fix)** The `systemd` service file that runs `dnsmasq`. Modified to grant necessary capabilities (`CAP_NET_BIND_SERVICE`, `CAP_NET_ADMIN`, `CAP_NET_RAW`) and run the daemon directly, bypassing the old `init.d` script. |
|              | `/etc/dnsmasq.conf`                                   | `etc/dnsmasq.conf`                                        | Main `dnsmasq` configuration. Modified to enable reading configs from `/etc/dnsmasq.d/` and to disable the DNS service (`port=0`) to prevent conflicts. |
|              | `/etc/dnsmasq.d/pxe.conf`                             | `etc/dnsmasq.d/pxe.conf`                                  | The core PXE setup. Defines the DHCP range (IPv4 & IPv6), TFTP root, and which boot file (`ipxe.efi`) to serve to UEFI clients. Bound to `enx00e04c369f39`. |
| **TFTP**     | `/var/lib/tftpboot/boot.ipxe`                         | `var/lib/tftpboot/boot.ipxe`                              | **Stage 1 iPXE Script.** Served via TFTP. Its only job is to chainload the main menu script from the HTTP server.                               |
| **HTTP Menu**| `/var/www/html/pxe/boot.ipxe`                         | `var/www/html/pxe/boot.ipxe`                              | **Stage 2 iPXE Script (Main Menu).** Served via HTTP. Defines the user-visible menu, OS choices, and the kernel/boot parameters for each OS.        |
| **Web Lease**| `/etc/cron.d/lease-updater`                           | `etc/cron.d/lease-updater`                                | The cron job that runs a Python script every minute to generate the `leases.html` webpage.                                                   |
|              | `/usr/local/bin/generate_lease_html.py`               | `other/dhcp_lease_viewer/generate_lease_html.py`          | The Python script that reads the DHCP lease file and generates the HTML page. (Path in repo is for reference).                            |
|              | `/usr/local/bin/ping_api.py`                          | `other/dhcp_lease_viewer/ping_api.py`                     | The background Flask API that provides live ping status for the `leases.html` page. (Path in repo is for reference).                       |